<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>虾米音乐app破解 | Cubernet&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="破解mac版的虾米音乐app">
<meta property="og:type" content="article">
<meta property="og:title" content="虾米音乐app破解">
<meta property="og:url" content="http://cubernet.cn/blog/xiami/index.html">
<meta property="og:site_name" content="Cubernet's Blog">
<meta property="og:description" content="破解mac版的虾米音乐app">
<meta property="og:image" content="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami.jpeg-blogpic">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="虾米音乐app破解">
<meta name="twitter:description" content="破解mac版的虾米音乐app">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">
  <link rel="stylesheet" href="/blog/font-awesome/css/font-awesome.min.css" type="text/css">
  


<!-- baidu Analytics -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cbf651a0c9c199e73857441cc83b3884";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- End baidu Analytics -->



</head>

<body style="background:#fff">


  <div id="container">

      

        

<header class="print-invisible post-header-position">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/blog/" id="post-logo"><i class="logo"></i><span class="site-title">Cubernet&#39;s Blog</span></a>
      <nav id="post-main-nav">
        
          <a class="main-nav-link" href="http://cubernet.cn">Home</a>
        
          <a class="main-nav-link" href="/blog/">Blog</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
          <a class="main-nav-link" href="/blog/about">About</a>
        
      </nav>

    </div>
  </div>
  
</header>



        <div class="outer">

        <section id="post-main"><article id="post-xiami" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      虾米音乐app破解
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/blog/xiami/">
    <time datetime="2014-03-30T16:39:16.000Z" itemprop="datePublished">2014-03-31</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/blog/categories/技术归档/">技术归档</a>
  </div>

          
  
    <div class="article-category">
  	<i class="fa fa-eye"></i>
  	<span id="busuanzi_value_page_pv"><i class="fa fa-spinner"></i></span>次阅读
  </div>
  

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
        <div id="toc" class="toc-article">
          <!-- # <strong class="toc-title">contents</strong> -->
          
        </div>
      
        <p>前几天登录虾米音乐，首页赫然提醒，建议用户将虾米账号迁移到淘宝上，以后用淘宝账号登录虾米。说实在的，当时心瞬间就凉了。就像当初排斥多看阅读迁移到小米账号上一样，我讨厌把自己在互联网上辛苦打造出来的一小片净土和BAT挂上勾。</p>
<p>说到这里，想起个“笑话”。</p>
<a id="more"></a>
<p><code>有人在逛淘宝搜索宝贝时，不小心输入错误，搜成了“棺材”。本以为只是一次手误，删了重来就可以。结果没想到的是，从此以后他每次再登录淘宝时，首页到处都是向他推荐棺材的。更过分的是，他的微博等各种社交空间上也到处都是推荐棺材的。欲哭无泪。</code></p>
<p>这就是天下账号大一统的后果，当然也是BAT希望看到的效果。</p>
<hr>
<p>言归正传。今天在看雪上注意到Hopper Disassembler这么一款软件，据说是mac平台上反编译神器，所以下下来体验一下。碰巧又在52上看到一个破解虾米音乐的例子，想到那让我心凉的虾米音乐，于是决定就对它下手了。</p>
<p>这次的任务是破解mac系统的虾米音乐app，使普通用户也可以享用VIP服务。</p>
<p>首先来一张破解之前的截图，未付费用户是无法享受高品质的。</p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-1.png-blogpic" alt="image"></p>
<p>然后打开HD，选择<code>Read Executable</code>-&gt;<code>应用程序</code>-&gt;<code>虾米音乐</code>-&gt;<code>Contents</code>-&gt;<code>MacOS</code>-&gt;<code>Xiami</code></p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-2.png-blogpic" alt="image"></p>
<p>等待几秒钟，待完全载入分析完成后，可以看到如下界面：</p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-3.png-blogpic" alt="image"></p>
<p>左边一栏列出了该程序中包含的函数，迅速浏览一遍，发现了一个<code>isVIP</code>的函数，从名字上猜测，这个函数是用来判断用户是不是VIP的（也可再搜索栏中直接搜isVip），点击左侧函数名，右侧便会显示出该函数对应的汇编指令。【这一步的截图丢失了，所以下面这张图是从52上搬过来的，可能稍微有点模糊】</p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-4.png-blogpic" alt="image"></p>
<p>从平时使用这款app的经验上可以得知，这款虾米客户端的功能比较简单，稍微复杂的操作都需要跳转到网页版进行，所以猜想客户端的逻辑验证也比较简单。</p>
<p>从<code>isVIP</code>这个函数中我们可以看到，首先对rbp压栈，然后做了几次赋值操作后，将rbp出栈返回。那么这个函数的实际工作过程有没有可能是：给用户一个是否为VIP的标识，然后通过向服务器查询，将返回值赋值给这个标识并返回。为了验证这个猜想，我们只需将rbp归零再加1，使其值为true，最后返回，如下图：</p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-5.png-blogpic" alt="image"></p>
<p>最后通过<code>File</code>-&gt;<code>Produce New Executable</code>来生成新的Xiami文件，替换原来的，双击运行，看到如下效果图：</p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-6.png-blogpic" alt="image"></p>
<p><img src="http://7xikui.com1.z0.glb.clouddn.com/2014-03-31-xiami-7.png-blogpic" alt="image"></p>
<p>看来我们猜测的没有错，现在已经可以享受高品质的音乐了。Have fun :)</p>
<hr>
<p>PS：由于是第一次在Mac上做相关的工作，所以觉得很新鲜很有趣，便记录下来，大神勿喷。</p>
<p>在此过程中，感谢52的xiaobai和NSTL卓博的大力帮助。</p>

      
    </div>
    

    

    

    <footer class="article-footer">
      <a data-url="http://cubernet.cn/blog/xiami/" data-id="cick7mqxp00045hy9pva7ulx5" class="article-share-link">Share</a>
      
        <a href="http://cubernet.cn/blog/xiami/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Hopper-Disassembler/">Hopper Disassembler</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/软件破解/">软件破解</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav-print">
<div class="article-nav-link-wrap-div-left">
  
      <a href="/blog/staticsearch/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">Newer</strong>
        <div class="article-nav-title">
          
            给jekyll添加静态搜索
          
        </div>
      </a>
  
  </div>
  <div class="article-nav-link-wrap-div-right">
  
    <a href="/blog/essay/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">不想写诗的程序员不是好农民</div>
    </a>
  
  </div>
</nav>

  
</article>
<div class="print-invisible">
  
<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>

</section>
        
            <aside id="sidebar" class="print-invisible">
            <div id="toTop" class="fa fa-chevron-up"></div>
          </aside>
        

      



    </div>
    <footer id="footer" class="print-invisible">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Cubernet<br>您是本站第<span id="busuanzi_value_site_uv"><i class="fa fa-spinner"></i></span>位访客<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/Cubernet/hexo-theme-EarthShaker/">EarthShaker</a>. 
    </div>
  </div>
</footer>
    

<script>
  var disqus_shortname = 'cubernet';
  var disqus_identifier = '/xiami/';
  var disqus_title = '虾米音乐app破解';
  var disqus_url = 'http://cubernet.cn/blog/xiami/';
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="http://cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script src="/blog/js/jquery.githubRepoWidget.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/blog/js/script.js" type="text/javascript"></script>
<script async="true" src="//dn-lbstatics.qbox.me/lbservice/busuanzi/2.0/busuanzi.mini.js"/></script>

  </div>
</body>
</html>