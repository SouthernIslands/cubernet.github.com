<?xml version="1.0" encoding="utf-8"?>
  <rss version="2.0"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
  >
  <channel>
    <title>Cubernet's Blog</title>
    <link href="http://cubernet.cn/feed/" rel="self" />
    <link href="http://cubernet.cn" />
    <lastBuildDate>2015-03-01T01:54:23+08:00</lastBuildDate>
    <webMaster>luxaole@gmail.com</webMaster>
    
    <item>
      <title>随便说点什么</title>
      <link href="http://cubernet.cn/newyear/"/>
      <pubDate>2015-02-28T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/newyear</guid>
      <content:encoded><![CDATA[<p>很久没有写一点东西，眼睛盯着屏幕，不知道该从何说起。</p>

<p>写上一篇博文的时候是在期末之前，到现在在家里背靠着床头为止，中间这段时间经历很多细小琐碎却让我觉得十足倒霉的事情。所谓吃一堑长一智，也算是买教训了。</p>

<!-- more -->


<p>从上次离家到这次回来，整整一年。还没来得及开寝室门，就被松哥喊去了上海，由此掀开了这一年的NSTL生活。说不上累，但也时不时的忙，六月的毕业和九月的开学与我无关，现在回头看一看，能想到的几个点，貌似只有怡然做手术、入职以及爸妈来成都。然后一晃就是一年，大家都说我还小，但我已经开始感觉到时间过得快的吓人。</p>

<h2>DOTA</h2>

<p>一上来就讲dota，不是因为它最重要，而是在这一年里它给了我新的意义。从单排到开黑，从DOTA1到DOTA2，从本科到毕业，伴随着DOTA的成长我们也一起慢慢长大。那些本科的记忆，兄弟间的情谊，都和DOTA缠绕在一起。有时候仅仅是上线看铭铭或者建行打上一小会儿，那感觉好像又回到623站在他们身后一样。Pis或者09的视频下面经常有这样的留言，“现在工作了没时间打，但还是喜欢来看看视频，这是一种别人不能理解的怀念方式”。厅长经常说东哥当年打大鱼人、主任玩lion的故事。</p>

<p>DOTA，原来是很多人的青春。</p>

<h2>毕业</h2>

<p>计划着毕业旅行、计划着拍毕业照、计划着毕业聚餐，总以为很周全的计划，现在回头想想，才觉得毕业的那么仓促。我时不时的联系你们，希望我们不要忘记。</p>

<p>过年回来宝铁在帅府街宴请小团体。我从西城墙一路走过来，感觉每一步迈过去，都是一大段的回忆。东方广场周边的房子都拆了，我最终还是没机会请桐桐吃上一碗传说中的瓦罐面。一中门口卖盒饭的小房子已经岌岌可危，也是第一次去小房子对面的公厕。出门东拐去帅府街，那个消防队还在，以前在操场经常能听到这里的号声。丁字路口的电线杆子也在，当年就在这个路灯下，跟三儿说我好像考砸了，可能要去成都。这里往前是跟嘉琪海龟周末常去吃的兰州拉面，往右是三儿当年租的房子，高考后的那个暑假，在这里住了很久，吃了很多包子。</p>

<p>年后大聚餐去了一多半人，好多同学四年没见，谈不上激动，不过见到老同学的确挺开心。虽说现在分处天南海北，但还是想说，有事没事常联系。</p>

<h2>变老</h2>

<p>人到了一定年纪之后就习惯把“老了”当做玩笑话挂在嘴边。可当真发现老了的时候，未必有多可笑。在外漂泊一年，除了明白钱难挣，屎难吃的道理之外，最大的感受就是时间过得太快。</p>

<p>今年回来发现爷爷脖子上的肉好像比去年更松了，爸爸的白头发更多了，前几天哥哥也当爸爸了。当时爷爷说了一句，“真快，你大姑也当奶奶了”。</p>

<p>我想我现在可能无法体会到一个人说自己的孩子当奶奶了的时候会是一种怎样的感受，但我知道，大家都变老了，我们所有人。</p>

<p>我翻着老照片，看着我们一点点变成长辈们年轻时的模样。</p>

<blockquote><p>门前老树长新芽/院里枯木又开花/半生存了好多话/藏进了满头白发</p>

<p>——《时间都去哪了》</p></blockquote>

<h2>幸福</h2>

<p>很久之前，偶然间进了羊蛋和晓波的情侣空间，记不清具体的等级了，总之那是个让我羡慕的数值，去年他们结婚了，我没能回来，再这里再次送上祝福。</p>

<p>倒不是我在孩子气的攀比谁的等级更高，而是我觉得，那是一点一滴的积累，那是平平淡淡的幸福。现在，我也拥有了这样的幸福。周一到周五工作学习打电话，周末一起吃遍成都玩转成都。偶尔还是会生气吵架，我也偶尔还是会孩子气不懂事，但我们现在拥有的是一份被两个人用心经营的很稳定的感情。即使天翻地覆，亦然心照不宣。这种感觉无法复制，更无法替代。我们会越走越好，点点滴滴都更好。从毕业来成都工作的那一刻起，你，甚至整个家庭对这份感情的付出我都看得到，也必定有回报。</p>

<p>说不清未来的路，但至少有陪伴，有幸福。</p>

<h2>博士</h2>

<p>这不是荣誉。</p>

<p>待我脚踏实地干五年。</p>

<p>然后给你们讲这些年的故事。</p>

<hr />

<p>明天一早又要踏上去成都的路，临行前晚，躺在床上辗转难眠。回忆虽好，但难免伤感，略不符合新春氛围。</p>

<p>只希望大家都好。</p>

<p>来年见。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>博客新增阅读书单和观影列表子栏目</title>
      <link href="http://cubernet.cn/readinglist/"/>
      <pubDate>2014-10-23T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/readinglist</guid>
      <content:encoded><![CDATA[<p>前天下午无意中看到一个博客中的阅读书单栏目，觉得把自己读过的或准备读的书记录下来是一个很好的想法，于是决定在我这里也模仿实现一个。用了一天时间，现在基本上完成啦。</p>

<p>犹豫平时闲暇时间更多的用来看电影了<img src="http://cubernet.cn/assets/smilies/5.gif"id="smiley">，所以又特意增加了一个记录电影的<!-- more -->子栏目。以后大家就可以通过电脑（出于排版优化的问题，手机访问时左边的导航栏默认是不显示的）访问我博客的<a href="http://cubernet.cn/books/">阅读书单</a>和<a href="http://cubernet.cn/movies/">观影列表</a>来与我交流分享好看的书或者电影了。</p>

<p>这一天的时间里，整理资料和编写代码的时间基本上一半一半吧。先说整理资料的事情。</p>

<p>由于电影基本上都是陪女朋友一起去电影院看的，而且我们有收集电影票的习惯，所以如果只是简单的列出条目应该比较简单。但是书单就没这么容易了。小说类的图书基本上都是看的电子版，看过就删，所以现在已经很难想起这几年看过哪些小说了。技术类的图书基本都是买正版纸质书，所以列出来的也算比较全。唯一遗憾的是很多书都是读了一半就放在一边了。这个毛病要改正，那些没读完的书，也要抽时间一点一点读完。</p>

<p>重点说这个书单和观影列表技术实现方面的事情。</p>

<p>首先是网页模板这边的工作量。每个子栏目都需要建立一个总的统计页面，每个具体的列表页面，也和普通博文的页面样式不同。所以首先给这两类页面写了相应的模板，保存在_layouts文件夹下。然后在css文件中调整页面布局，最后在手机端测试，做手机端的浏览优化。整个流程下来，耗时约两小时。</p>

<p>当我私以为小屋已经搭好，马上就可以上线时才发现，书单内容和电影详情的录入是一件多么耗时耗力的事情。再加上栏目建立初期，需要同时统计过去几年内的东西，想起来就觉得可怕。</p>

<p>不过一想到万事开头难，便咬着牙开始一一录入。又过了不知好久，书单详情录入完毕。发布，刷新，恩，效果还算满意。<img src="http://cubernet.cn/assets/smilies/10.gif"id="smiley"></p>

<p>可是再当我录入一个电影详情再做测试时，发现图片竟然加载不了。一研究，原来是豆瓣电影对图片做了防盗链，页面上所有引用豆瓣电影的图片全部显示为X<img src="http://cubernet.cn/assets/smilies/15.gif"id="smiley">。没想到同属豆瓣，豆瓣读书和豆瓣电影竟然对图片的处理上相差了这么多，不知道是因为背后的技术团队不同还是出于版权的考虑。总之，对我而言，豆瓣的图我是没办法用了。如果说手动复制粘贴链接还能忍受的话，那么每个图片都要手动寻找链接，然后下载，然后改名、另存为，最后把本地链接写到页面上，这么一套全部手工实现的话，我想接下来这一周我都有事情做了。所以，我又自然而然的操起老本行，用爬虫帮我下载。</p>

<p>既然决定写脚本，不如全部工作就都由脚本来实现好了。于是有了如下的脚本：</p>

<p><img src="/assets/images/2014-10-23-readinglist2.png" alt="image" /></p>

<p>脚本的源码可以在我github库中下载。简单说下实现思路及功能：</p>

<p>功能：</p>

<ul>
<li>根据输入的电影名称，自动在豆瓣电影中搜索该电影</li>
<li>从搜索结果中自动提取该电影的导演、主演等信息</li>
<li>根据输入的年份，将提取到的电影信息按到指定的格式追加写入到对应年份观影列表的.md文件中</li>
<li>将该电影的主题海报自动下载并归类保存在posters文件夹中，并将生成的链接加入到.md文件中</li>
</ul>


<p>实现思路：</p>

<ul>
<li>Python脚本实现</li>
<li>最基本的根据指定url爬取对应页面内容</li>
<li>将爬虫访问行为伪装成用户的浏览器访问行为</li>
<li>正则表达式提取关键字段</li>
<li>读取本地文件，并在指定位置追加写入新的内容</li>
<li>Python脚本命令行参数读取</li>
</ul>


<p>最终实现的效果是，我只需要<code>python douban.py -y 2014 -n 心花怒放 -p xhnf</code>这么一行命令，即可完成<code>心花怒放</code>的信息爬取、海报下载和观影列表文件内容的自动填充。于是，我用了几分钟，完成了三十多部电影信息的添加<img src="http://cubernet.cn/assets/smilies/28.gif"id="smiley">。</p>

<p>记得有人说过，人和猿最大的区别是是否懂得使用工具。我一直以为这句话的另一种表达方式是人会使用工具而猿不会。</p>

<p>看来我理解反了。<img src="http://cubernet.cn/assets/smilies/38.gif"id="smiley"></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>PVM环境配置</title>
      <link href="http://cubernet.cn/pvm/"/>
      <pubDate>2014-10-14T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/pvm</guid>
      <content:encoded><![CDATA[<blockquote><p>并行计算机（pvm）是用于网络并行计算机上的软件工具。设计它的目的是将异构的计算机网络连接起来，使它使用起来就像一组分布式的并行处理器。</p>

<p>——百度百科</p></blockquote>

<p>PVM即Parallel Virtual Machine，并行虚拟计算机，是一个软件包，它能够把一些安装有Unix或Windows系统的计算机组成一个异构系统，使其用起来就像一个单一但能力强大的并行计算机。PVM支持的异构性分为三层：机器层、应用层和网络层。</p>

<!-- more -->


<h4>PVM的特点</h4>

<ul>
<li>支持多用户及多任务</li>
<li>提供便于使用的通信原语</li>
<li>提出了进程组的概念</li>
<li>可无差别地运行在多种操作系统上</li>
<li>具有容错功能</li>
</ul>


<h4>PVM的安装</h4>

<p>PVM是一套跨平台的软件系统，我是在Ubuntu Server 10.04.4版本下安装并测试的。</p>

<p>Ubuntu环境下安装PVM是一件十分简单的事情。只需要在终端中执行<code>$sudo apt-get install pvm</code>即可。</p>

<p>接下来，我们需要查看一下PVM安装在了系统的哪个位置。通常在/usr/lib/pvm3或/usr/local/lib/pvm3中。include文件夹在/usr/include路径下。</p>

<p>知道了安装路径后就可以在.bashrc文件中设置环境变量：</p>

<div class="highlight"><pre><code class="c"><span class="lineno">1</span> <span class="n">export</span> <span class="n">PVM_ROOT</span><span class="o">=</span><span class="s">&quot;/usr/lib/pvm3&quot;</span>
<span class="lineno">2</span> <span class="n">export</span> <span class="n">PVM_ARCH</span><span class="o">=</span><span class="err">`$</span><span class="n">PVM_ROOT</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pvmgetarch</span><span class="err">`</span>
<span class="lineno">3</span> <span class="n">export</span> <span class="n">XPVM_ROOT</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">xpvm</span>
<span class="lineno">4</span> <span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">PATH</span><span class="o">:</span><span class="err">$</span><span class="n">PVM_ROOT</span><span class="o">/</span><span class="n">lib</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span>
<span class="lineno">5</span> <span class="n">export</span> <span class="n">PVM_RSH</span><span class="o">=</span><span class="err">`</span><span class="n">which</span> <span class="n">ssh</span><span class="err">`</span>
</code></pre></div>


<p>在home目录下建立.rhosts文件，在rhost文件中列出当前可用的计算机名或者IP地址。</p>

<h4>PVM的使用</h4>

<p>在终端中输入pvm，进入PVM的控制台界面。</p>

<blockquote><p>pvm></p></blockquote>

<p>如果有新的结点需要增加，则输入下面的命令：</p>

<blockquote><p>pvm>add <hostname></p></blockquote>

<p>hostname是你想添加的计算机名称或者IP。</p>

<p>在PVM的终端界面还有很多交互命令，可以输入<code>help</code>来查看。</p>

<p>在这个网站上有一个基于PVM的矩阵乘法示例程序=》<a href="http://math.arizona.edu/~swig/documentation/pvm/matrix_mult/">PVM Matrix Multiplication Example</a></p>

<p>下载上面提供的master.c、slave.c和Makefile.aimk文件，在本地编译：</p>

<pre><code>aimk mm_master mm_slave
</code></pre>

<p>如果编译成功了，则可以进入PVM中运行：</p>

<blockquote><p>pvm>spawn -3 ->mm_master</p></blockquote>

<p><code>spawn</code>是向PVM中加载任务。然后程序会自动运行，将计算结果保存在mat.out文件中。</p>

<h4>并行算法</h4>

<p>上述示例程序中使用了外积算法，即每个结点每次独立运算得到结果矩阵C的一行数值：</p>

<p><img src="http://latex.codecogs.com/png.latex?C_{*j}=(c_{1j},c_{2j},...,c_{mj})%20^{\tau}%20=%20\sum_{k=1}^{n}(a_{1k},a_{2k},...,a_{mk})^{\tau}b_{kj},j=1,2,...,p" alt="image" /></p>

<blockquote><ul>
<li>矩阵a保存在master中；</li>
<li>矩阵b分别在每个slave结点只能中保存一份；</li>
<li>master把矩阵a的每一行发送给一个单独的slave；</li>
<li>如果结点数小于a的行数，则等待某些slave运算完成并返回结果时，再向其分发新的任务；</li>
<li>master在收到所有slave返回的结果后，把结果c保存在mat.out文件中。</li>
</ul>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>在Markdown中使用数学公式</title>
      <link href="http://cubernet.cn/mdformath/"/>
      <pubDate>2014-10-11T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/mdformath</guid>
      <content:encoded><![CDATA[<p>上一博文是翻译的一篇学术论文，在用markdown语法编辑译文时，发现原文中出现的公式不知如何插入。</p>

<p>当然，能想到的一个简单的办法就是，把原文中的公式截图，然后在译文中插入图片。但是，作为一个天生爱折腾的工科男，这样的解决办法显然满足不了我。</p>

<!-- more -->


<p>用百度谷歌了一番之后发现，原来还真有别的办法。那就是将LaTex强大的数学公式排版能力与Markdown相结合。</p>

<p>第一步，将原文中的公式用Latex语法描述出来。例如<img src="http://latex.codecogs.com/png.latex?\\I(x;y)%20=%20\iint%20p(x,y)log\frac{p(x,y)}{p(x)p(y)}dxdy." alt="image" />这个公式的Latex语法是：<code>I(x;y\)=\iint p(x,y)log\frac{p(x,y)}{p(x)p(y)}dxdy.</code></p>

<p>第二步，将这段LaTex语法描述的公式转化成图片插入到Markdown文本中。这里有两个可以调用的接口。</p>

<p>七十二松网站的Latex服务调用接口：</p>

<blockquote><p>http://tex.72pines.com/latex.php?latex=$LaTeX公式代码$</p></blockquote>

<p>Google的Latex服务调用接口：</p>

<blockquote><p>http://latex.codecogs.com/png.latex?LaTex公式代码</p></blockquote>

<p>当然，看到这里，有些同学可能会说，用LaTex语法编写数学公式的门槛太高，需要太多时间去熟悉、记忆。其实你大可不必担心，推荐给大家一个很好的在线LaTex公式编辑器，<a href="http://www.codecogs.com/latex/eqneditor.php"><strong>传送门</strong></a>。有了它，分分钟写出自己想要的LaTex公式不是梦。当然，这个网站也提供了丰富易用的调用接口，大家也可以直接利用。</p>

<hr />

<p>还有一种方法我没有尝试，但是整理在这里，供大家参考。其实也很简单，那就是使用<a href="http://www.mathjax.org"><strong>MathJax</strong></a>，只需要在你的页面添加几行代码，就可以解析LaTex、MathML等语法描述的数学公式了。如果你用过，欢迎与我交流使用感受<img src="http://cubernet.cn/assets/smilies/16.gif"id="smiley">。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>【译】网络钓鱼检测：综述</title>
      <link href="http://cubernet.cn/phishing-review/"/>
      <pubDate>2014-10-10T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/phishing-review</guid>
      <content:encoded><![CDATA[<p><a href="http://ijcsmc.com/docs/papers/February2014/V3I2201499a42.pdf"><strong>原文地址</strong></a>： http://ijcsmc.com /docs/papers/ February2014/ V3I2201499a42.pdf</p>

<p>作者：Feon Jaison1, Seenia Francis</p>

<p>感谢Feon Jaison1, Seenia Francis提供的优质文章。</p>

<p>这篇文章在我最近项目的完成过程中给予了很大的帮助，特在此表示感谢，并翻译之。</p>

<!-- more -->


<p>下面是译文内容：</p>

<p><strong>摘要</strong>：网络钓鱼是指通过电子邮件或其他网络聊天服务，试图窃取用户身份信息或银行卡号、密码等个人信息的行为。通常，攻击者会伪装成一个相关组织，引导受害者访问一个伪造的官方网站，进而通过这个钓鱼网站收集用户的个人信息。攻击者也会通过诱导用户点击内嵌在电子邮件中的链接使用户在未知情况下下载恶意软件。</p>

<p>研究者们提出了一些防止用户受到钓鱼攻击的方法。常见的方法有：防火墙技术、黑名单技术、垃圾邮件技术、假冒网站监测技术、客户端插件和用户安全意识教育等。每种现有的技术都有各自的利弊。如何自动识别钓鱼攻击目标是目前反钓鱼工作中最重要的问题。如果我们知道某个页面包含钓鱼攻击目标，我们就可以确认含有该目标的页面都是钓鱼页面。这可以帮助站长更好的识别钓鱼攻击，从而使他们能够立即采取必要的反制措施。</p>

<p><strong>关键词</strong>：钓鱼网站，分裂式聚类算法，分类</p>

<h3>1.介绍</h3>

<p>本文主要探讨钓鱼检测的重要性并对现有的几种检测方法做出评价。钓鱼攻击每年都给许多上网用户造成巨大损失。我们的目标是将基于人工的黑名单验证技术和具有低误报率的启发式方法相结合。所以，我们之后阐述的检测方法都是在人工验证黑名单的基础上，应用各种新的技术。从卡内基梅隆反网络钓鱼和网络分析工具中引入的功能在很大程度上与基于机器学习的网络钓鱼检测很相似。这种启发式检测通常都利用了URL相似度计算、域名概率评估、IP地址和端口号检测等技术。进一步，我们可以通过Google Page rank等第三方库，查询网站的排名、注册内容等其他信息。相比于之前基于签名的模型，这种方式显著的增加了钓鱼网站的检测效率。这种方法可以检测出各种含有钓鱼攻击和异常行为的网站。</p>

<p>网站的页面内容一方面能够很好地展现该站点的目的和意愿，另一方面也成为钓鱼欺诈信息的主要显示途径。目前，包括决策树、支持向量机、朴素贝叶斯分类、神经网络在内的很多机器学习算法已经被应用到检测模型的训练中，通过该模型来预测一个给定的网站是否为钓鱼站点。聚类和分类是数据挖掘的两个根本任务。分类是一种有监督的学习方法，而聚类是无监督的。聚类的目的是对现有数据做出描述，而分类则是做出预测。我们把相似的聚类实例数据划分到一个子集，不同的子集包含不同种类的数据。通过这种方式，将数据划分成具有高度代表性的若干子集。形式上，聚类结构被表示为一组子集。我们划分子集的依据是各个实例数据之间的距离。目前有两种常见的方法来估算两个数据之间的关系，分别是距离度量和相似性度量。许多聚类算法都是通过距离度量来判断数据之间的相似性。这里我们把Xi和Xj之间的距离表示为d(Xi,Xj)。</p>

<p>相似函数被认为是一种替代概念上的距离，即向量xi和xj的距离函数s(xi,xj)。这个函数应该是对称的，例如满足s(xi,xj)=s(xj,xi)。通过余弦函数求得两个向量的夹角作为衡量它们相似性的方法，归一化的向量内积也是一种有效的相似性度量方法。现有的基于黑/白名单的钓鱼模型的工作流程为，当用户访问一个网站时，反钓鱼工具首先在数据库中存储的黑名单内搜索该网站的地址。</p>

<p><img src="http://latex.codecogs.com/png.latex?\s(x_{i},x_{j})%20=%20\frac{x_{i}^{T}\cdot%20x_{j}}{\left%20|%20x_{i}%20\right%20|\cdot%20\left%20|%20x_{j}%20\right%20|}" alt="image" /></p>

<p>如果数据库中包含该访问的网站地址，那么反钓鱼工具将引导用户避免钓鱼攻击。包括来自EarthLink的公司Scam Blocker,Phish Guard和Net craft等都是属于这一类型的工具。在基于规则的检测方法中，通过在软件中内置过滤规则，然后通过这些规则来检测一个网站的安全性。这种类型的工具包括斯坦福大学开发的Spoof Guard等。Spoof Guard会检查域名、URL，它也会检测电子邮件中的链接地址是否指向当前URL。一旦检测出当前访问网站的域名与某著名网站域名相似，或者该站点没有使用标准端口，Spoof Guard就会提醒用户小心钓鱼网站。这些工具都提供了浏览器插件，以便于通知用户当前访问的站点是否可信。</p>

<p>钓鱼网站智能检测是通过各种分类算法进行特征提取，进而基于特征提取模块对各种钓鱼网站特征的提取结果做层次化聚类。</p>

<p>1）特征提取是模式分类中的重要问题。这个过程包括了如何基于信息之间的相互性来选择有效的特征。由于直接执行最大相关性的条件非常苛刻，所以我们采用了一种叫做最小冗余-最大-相关准则的等效方式来用于一阶的增量特征选择。这个过程包括从N个样本中选择特征，例如，一个特征选择问题就是从M维观测空间R(M)，得到m个特征的子空间。</p>

<p><img src="http://latex.codecogs.com/png.latex?\\I(x;y)%20=%20\iint%20p(x,y)log\frac{p(x,y)}{p(x)p(y)}dxdy." alt="image" /></p>

<p>2）朴素贝叶斯分类认为所有这些属性对于“这种水果是苹果”推断的贡献是相互独立的。它只需要少量的训练数据来估计所需的分类参数，即基于均值和方差的朴素贝叶斯概率模型。该概率模型的分类器是由相关变量C在F1到Fn的若干特征变量作用下得出。</p>

<p><img src="http://latex.codecogs.com/png.latex?\\p(C\mid%20F_{1},...,F_{n})" alt="image" /></p>

<p>3）定义统计学习的最好方法称为有监督学习。在此，每个数据点都包含一个特征向量x和一个类标签y，并假定有一个函数f，使得y=f(x)满足每个训练数据点(x,y)。学习算法的目标是找到一个很好的近似ħ到f可以应用到分配标签到新的x值。函数h称为分类器，因为它以输入数据点×分配类标签y。有监督学习可以应用到许多问题，包括手写识别，医疗诊断。</p>

<p>4）聚类是一种用于将数据元素融入到相关组中的数据挖掘技术。数据挖掘通过分析不同的立体数据和所述数据，并对其进行分类、总结，最后将其转化为有用的信息。通常使用聚类分析，归纳，决策树等方法做分析，最流行的方法是将数据分成不相交的组。层次化聚类将测量2元组和其指定的集的成对距离的函数相异性之间的距离。</p>

<h3>2.应用</h3>

<p>该反钓鱼软件可以部署在以下4种不同的场景中。</p>

<p>1）将反钓鱼过滤器集成在浏览器本身。</p>

<p>2）将反钓鱼过滤器集成在安全类软件中。</p>

<p>3）将反钓鱼软件集成在路由器中。</p>

<p>4）在电子邮件软件中集成反钓鱼过滤器，或者阻塞由虚拟主机服务器发送的电子邮件。</p>

<h3>3.结论</h3>

<p>网络钓鱼已经成为一个严重的网络安全问题，每年对消费者和电子商务公司造成数十亿美元的经济损失。网络钓鱼攻击可以通过用户举报，图像监控，蜜罐以及其他技术相结合的方式来检测。通过广泛部署电子邮件认证技术，如发件人ID和加密签名，来降低网络钓鱼邮件被成功发送到用户邮箱的可能性。个人身份信息应包括在所有电子邮件通信系统中，并且系统应该允许用户输入或选择自定义文本和图像。基于浏览器插件的反钓鱼工具栏在识别钓鱼网站，检测到潜在的网络钓鱼网站时加高安全性等方面非常有效。</p>

<p><strong>REFERENCES</strong></p>

<p>1) Feature Selection Based on Mutual Information: Criteria of Max-Dependency, Max- Relevance, and Min- Redundancy Hanchuan Peng, Member, IEEE, Fuhui Long, and Chris Ding.</p>

<p>2) Hierarchical Clustering Algorithm - A Comparative Study,Dr.N.Rajalingam K.Ranjini Dept. of Management Studies.</p>

<p>3) CANTINA: A Content-Based Approach to Detecting PhishingWeb Sites.Yue Zhang Dept of Computer Science University of Pittsburgh 210 South Bouquet Street.</p>

<p>4) Naive Bayes Classifier.</p>

<p>5) Web Phishing Detection In Machine Learning Using Heuristic Image Based Method, Vinnarasi Tharania. I,
R. Sangareswari , M. Saleembabu International Journal of Engineering Research and Applications ISSN: 2248-9622</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>开学记</title>
      <link href="http://cubernet.cn/xiabb/"/>
      <pubDate>2014-09-16T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/xiabb</guid>
      <content:encoded><![CDATA[<p>作为一名资深老学生，本已没有心情再去关心开学放假这种逗小朋友的事情，但不得不承认今年开学这两周所经历的一些事还是让我有了很多感触。拟题<code>xiabb</code>，后又觉得有失风度，遂改为<code>开学记</code>。</p>

<p>感觉上一直是从年初3月份来校后一直忙过来的，虽然中间夹杂着毕业季和暑假，但对我来说貌似都是夹杂在忙碌中的很普通的日子。直到突然有一天收到系统发送的欢迎新生报道和提示新生缴费的短信时，才意识到，又开学了。</p>

<!-- more -->


<p>于是又看到在军训的大一，又看到在招新的大二，又看到在卖新生用品的大三和攻陷图书馆的大四。我骑着车飞速的穿越在人群中，眼中的每一幕都是曾经的自己。当然，我也像师兄师姐一样经历着他们的过去。水水的报道，水水的体检，贪婪的选课后又疯狂的逃课。</p>

<p>说到上课，我不知道现行的培养方案是出于何种考虑制定出来的。我只是觉得，这种为了学分而选课，为了上课而上课的方式，对学生的成长来说，收效甚微。再从学时上看，很多有意义有价值的课程都被设定为选修课，课堂上老师只能蜻蜓点水的讲，很快学时上完，然后草草收场。而另外一些相对基础相对简单的课程，却安排了大量的学时，所以90分钟的课堂编成了60分钟的瞎扯和30分钟的干货。试问，何不只安排学生听30分钟，把剩下的时间交给学生自己去做点有意义的事情呢？</p>

<p>我不是喜欢翘课，我只是觉得，在现在这种教学体制下，或许学校和老师也都出于无奈，但，我要为自己负责。</p>

<hr />

<p>前几天在河畔上看到一位毕业师兄发的帖子。帖子的内容大概是列举了几位本科班级上不同成绩同学毕业后的不同选择以及现状，然后和他自己作比较，得出结论是推荐出国和工作。恰逢最近也是大四决定保研出国的时间段，前来跟我讨论这个话题的同学也比较多。我的观点是，我们不能仅仅通过自己的例子或者身边几个师兄师姐的例子就简单的说工作好还是读研好，国内好还是国外好，读硕好还是读博好。我认为，能够决定你选择的只有你自己；换句话说，这个选择好不好，是要看人的。诚然国外的教育理念和教育水平要比国内很多院校都强，但是如果你英语烂到掉渣，如果你连国内普通学生最基本的水平都没有达到，那么你出国的意义是什么？难道仅仅是为了在朋友圈里发几张米国月亮的照片来刷存在感么？再说工作还是读研。见过很多在读研究生，整天啥事不干在那抱怨读研有多坑，那些工作的同学现在混的有多好，早知道当初不读研了之类的。试问，你只看到了那些同学辉煌的一面，你没看到的是当你还在考虑提前十分钟早退去食堂吃饭，当你还在跟导师“斗智斗勇”争取少做一点事情，当你还在睡懒觉刷网页时，你的那些同学在做什么。他们的辉煌是靠加班、靠付出一点一滴换来的。那些读研的同学中必定也有混的不错的。<code>使你变成现在这样的，不是当初的选择，而是自身的懒惰。</code>最后还有同学犹豫要不要读博。对于这个问题，我只想说，不要通过硕士和博士以后的待遇或发展来决定自己的选择。如果你是一个适合钻研耐得住独孤的人，那么如果只读硕士，你可能会发现没有一个很好的平台去支持你的研究。当然读博需要考虑更多的因素，时间、能力、感情、经济，等等。</p>

<p>说了这么多，实在是被问烦了，那些加了QQ上来就问选哪个挣钱多的人，我真心是恨不得直接拉黑。其实就是一句话，根据自己的客观条件，选择最适合自己的，然后<code>脚踏实地</code>做下去，今天吃的苦，以后笑着说出来就是了。当然，如果你有一个<code>脚踏实地</code>做下去的爹，那可以直接忽略以上所有。</p>

<hr />

<p>最后谈谈自己。再次从最近手上的这个项目中领略到，摆正态度是做好一件事情的先决条件。最近睡的比较晚，整天都在向科研大神看齐，琢磨着如何优化如何发文。自我感觉在方式方法上已算简单入门，坚持下去，那些想要的东西应该是早晚的事。继续加油。</p>

<hr />

<p>一不小心写了这么多，就像开篇说的一样都是xiabb，我是开玩笑的，您别当真。<img src="http://cubernet.cn/assets/smilies/37.gif"id="smiley"></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>墙里墙外</title>
      <link href="http://cubernet.cn/overthewall/"/>
      <pubDate>2014-08-21T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/overthewall</guid>
      <content:encoded><![CDATA[<blockquote><p>秦筑长城比铁牢，蕃戎不敢过临洮。</p>

<p>虽然万里连云际，争及尧阶三尺高。</p>

<p>——《长城》【唐】汪遵</p></blockquote>

<p>“互联网”这个词现在已经逐渐为大众知晓，“长城”一词也自古就时常出没于文人骚<!-- more -->客的笔下，但是“互联网中的长城”即<code>GFW</code>，可能不是所有的人都听过。GFW即Great Firewall of China（翻译过来是长城防火墙），是我国在中国网络出口处部署的一套网络安全系统。</p>

<p><code>GFW</code>其实早已名声在外，在大众眼中，它的作用无非就是让国内的网民无法访问国外的网站，在一定程度上也不允许国外的网民访问国内的网站。从这个角度来看，这个防火墙以及它的主要创建者背负那么大的骂名也是可以理解的。作为网络安全实验室中的一员，我一直不愿对GFW做太多的评价。我只想说，GFW还是很有必要的，方校长也没有那么可恶。</p>

<hr />

<p>但是。</p>

<p>但是但是。</p>

<p>凡事要有度。要有度啊！</p>

<hr />

<p>最初，你们说不允许连接国外的H网<img src="http://cubernet.cn/assets/smilies/23.gif"id="smiley">无所谓啊，反正对外国人无感</p>

<p>然后，你们又说Facebook、Twitter也不要访问了，上面的反动言论太多<img src="http://cubernet.cn/assets/smilies/37.gif"id="smiley">无所谓啊，反正我也没有外国朋友</p>

<p>接着，包括Google在内的一大波常用网站开始沦陷，据说原因比较复杂，不能全怪GWF<img src="http://cubernet.cn/assets/smilies/7.gif"id="smiley">好吧，那我就勉强https访问谷歌香港呗，虽然好多博客访问不到了，至少还能访问Stack Overflow等等</p>

<p>最后，你们连同Stack Overflow、github、谷歌学术一起封了<img src="http://cubernet.cn/assets/smilies/33.gif"id="smiley">我只想说一个程序猿讨论编程问题的地方、一个程序猿分享代码的地方、一个程序猿搜索论文的地方，你TMD封个蛋蛋！大家都是程序猿，相煎何太急。</p>

<hr />

<p>不知道别人是什么情况，反正我有一种良民被逼上梁山的感觉，我这个胖子也不得不开始翻墙。不过，我还是觉得GFW是有必要存在的，只是没必要这么过分。想到最近爆出的各种后门、漏洞，好多<code>专家</code>又开始建议什么政府级办公电脑要采用国产操作系统啦，相关人员不许使用iPhone啦等等<img src="http://cubernet.cn/assets/smilies/10.gif"id="smiley">。同样的道理，不是说不需要防范国外的软硬件，而是要有个度，毕竟国内在相关领域很多地方都还是空白。你说不用Windows，难道要用DOS？<img src="http://cubernet.cn/assets/smilies/21.gif"id="smiley">不对，好像DOS也不是国产的。师夷长技以制夷，闭关锁国，一步之遥。</p>

<hr />

<p>好了，牢骚发泄完了，下面进入正题。</p>

<p>相信那些免费的翻墙软件大家都已经很熟悉了。相关的安装配置教程网上也是一搜一大把，这里就不再赘述。我想向大家推荐的是一个收费的VPN解决方案。相比于免费的翻墙工具，收费的不用担心流量、速度、稳定性等问题，个人觉得还是物有所值的。采用这套VPN及即将介绍的路由配置方法，可以达到国内国外网站访问VPN自动切换的效果，完全无感访问。<img src="http://cubernet.cn/assets/smilies/12.gif"id="smiley"></p>

<p>大家点击这个链接<a href="http://gjsq.me/1915340"><strong>点击访问</strong></a>或者博客主页左侧栏中的购买按钮可以进入GreenVPN的主页进行了解或购买。算下来一个月大概十几块钱，前期注册即送200M体验流量，可以先体验后付费。</p>

<p>通过下载这个脚本<a href="https://code.google.com/p/chnroutes/wiki/Usage"><strong>点击下载</strong></a>，可以让vpn客户端在进行连接的时候自动执行。通过这些路由脚本, 可以让用户在使用vpn作为默认网络网关的时候，不使用vpn进行对中国国内ip的访问，从而减轻vpn的负担，增加访问国内网站的速度。具体使用方法在下载页面有详细的说明，不同操作系统方法略有不同。</p>

<hr />

<p>有了这两个宝贝，从此便可以随意穿梭于墙里墙外了。友情提示，多读论文，少看小电影。当然，如果你觉得这个工具对你有用，建议点击我提供的链接访问GreenVPN进行购买，这样我会得到小额回报，就当是大家送我的二十二岁生日礼物了。<img src="http://cubernet.cn/assets/smilies/37.gif"id="smiley"></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>HOW BAD YOU WANT IT</title>
      <link href="http://cubernet.cn/howbadyouwantit/"/>
      <pubDate>2014-08-07T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/howbadyouwantit</guid>
      <content:encoded><![CDATA[<blockquote><p>Where all you wanna do is be successful as bad as you wanna breathe,then you will be successful.——HOW BAD YOU WANT IT</p></blockquote>

<!-- more -->


<p>这两个视频在手机中陪伴了我很多年。</p>

<p>时不时拿出来看一看，告诉自己，要做的还有很多。</p>

<p>越成功的人的背后一定越有超越常人的付出和努力，与种族、肤色无关，与国籍、政策无关，与智力、性格无关，我始终坚信这一点。</p>

<p>所以我一直提醒自己，</p>

<p>做一个能够看到别人背后辛勤付出的人，</p>

<p>然后做一个他们这样的人。</p>

<hr />

<h2>HOW BAD YOU WANT IT</h2>

<center><embed src="http://player.youku.com/player.php/sid/XNjEyMjYyODk2/v.swf" allowFullScreen="true" quality="high" width="480" height="400" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed></center>


<h2>HOW BAD YOU WANT IT Ⅱ</h2>

<center><embed src="http://player.youku.com/player.php/sid/XNTQ2MzMwOTY0/v.swf" allowFullScreen="true" quality="high" width="480" height="400" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed></center>


<p>或者说是深思熟虑了好久，亦或仅仅是三个年轻人的一时兴起，iOS小组成立了。</p>

<p>也许在之后的日子里，当我们看着一堆反编译代码很久很久却依然毫无头绪时，<img src="http://cubernet.cn/assets/smilies/7.gif"id="smiley"></p>

<p>我们能做的，</p>

<p>只能是把它做的更好。</p>

<p>HOW BAD YOU WANT IT，</p>

<p>我们不能放弃。</p>

<hr />


<p>记得有一次周末来实验室，看到师兄一个人在学习，便问他怎么不去陪女朋友。</p>

<p>他说，“科研注定是孤独的。”</p>

<p>也对。<img src="http://cubernet.cn/assets/smilies/12.gif"id="smiley"></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>【译】在iOS上以root身份运行守护进程</title>
      <link href="http://cubernet.cn/rootdaemon/"/>
      <pubDate>2014-08-06T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/rootdaemon</guid>
      <content:encoded><![CDATA[<p><a href="http://bbs.iosre.com/forum.php?mod=viewthread&amp;tid=204&amp;page=1&amp;extra=#pid1096">原文地址</a>：http://bbs.iosre.com /forum.php? mod=viewthread &amp;tid=204&amp;page=1 &amp;extra=#pid1096</p>

<p>作者：snakeninny</p>

<p>感谢snakeninny提供的优质文章。</p>

<p>这篇文章在我最近项目的完成过程中给予了很大的帮助，特在此表示感谢，并翻译之。</p>

<!-- more -->


<p>下面是译文内容：</p>

<h2>第一部分 基础理论</h2>

<ol>
<li><p>守护进程</p>

<p> 什么是守护进程？根据<a href="http://http:en.wikipedia.org/wiki/Daemon">wikipedia</a>的解释，守护进程是一个运行在计算机后台、不受前台用户交互影响的进程。通常，守护进程以字母<code>d</code>结尾，例如，syslogd是处理系统日志的后台进程，sshd是处理SSH链接请求服务的进程。你可以以<code>backboardd</code>,<code>mediaserverd</code>,<code>apsd</code>等 来命名iOS上的其他后台进程。 后台进程是由iOS上的第一个进程<code>launchd</code>启动的，launchd是开机时启动的第一个进程。那么守护进程能做什么呢？“它可以为网络请求，硬件活动以及一些处理其他任务的程序提供后台服务”。<strong>注意：以root身份运行的后台进程功能非常强大，并且非常隐蔽，很多时候也许超级管理员都不知道有一些后台进程在偷偷运行。所以，一些恶意软件就是以后台进程的形式存在的。这篇文章只是用来交流学习，如果你去做非法的事情，后果自负。</strong></p></li>
<li><p>守护进程的所有者</p>

<p> 守护进程是由launchd启动，通过“launchctl”命令加载配置文件。我们要特别注意在这个<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/launchctl.1.html">查询手册</a>中提到的，“LaunchAgents启动加载的每个配置文件必须属于启动加载它们的用户。所有的系统后台进程必须属于root用户。”配置文件不可以是属于“group-”或者任何人可写。这些限制是出于安全考虑，因为如果一个启动配置文件是任何人可写的话，那么就有可能出现在程序启动时配置文件被恶意修改的情况。因为后台进程是由launchd启动的，所以它应该属于root:wheel：</p>

<pre><code> FunMaker-5:~ root# ls -l /sbin/launchd
 -r-xr-xr-x 1 root wheel 154736 Nov  8  2013 /sbin/launchd
</code></pre></li>
</ol>


<h2>第二部分 组成</h2>

<p>正如在《iOS应用逆向工程》一书中提到的那样，后台进程包括两个部分，一个可执行的二进制文件和一个配置plist配置文件。下面，让我们利用Theos来创建一个可执行二进制文件：</p>

<pre><code>snakeninnys-MacBook:Code snakeninny$ /opt/theos/bin/nic.pl
NIC 2.0 - New Instance Creator
------------------------------
[1.] iphone/application
[2.] iphone/cydget
[3.] iphone/framework
[4.] iphone/library
[5.] iphone/notification_center_widget
[6.] iphone/preference_bundle
[7.] iphone/sbsettingstoggle
[8.] iphone/tool
[9.] iphone/tweak
[10.] iphone/xpc_service
Choose a Template (required): 8
Project Name (required): rootdaemond
Package Name [com.yourcompany.rootdaemond]: com.iosre.rootdaemond
Author/Maintainer Name [snakeninny]: snakeninny
Instantiating iphone/tool in rootdaemond/...
Done.
</code></pre>

<p>然后修改main.mm文件的内容：</p>

<pre><code>static void Reboot(CFNotificationCenterRef center, void *observer, CFStringRef name, const  void *object, CFDictionaryRef userInfo)
{
        NSLog(@"iOSRE: reboot");
        system("reboot");
}

int main(int argc, char **argv, char **envp)
{
        NSLog(@"iOSRE: rootdaemond is launched!");
        CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), NULL, Reboot, CFSTR("com.iosre.rootdaemon.reboot"), NULL,  CFNotificationSuspensionBehaviorCoalesce);
        CFRunLoopRun(); // keep it running in background
        return 0;
}
</code></pre>

<p>现在，让我们处理配置文件。以“com.iosre.rootdaemond.plist”为文件名新建文件，然后将下面的代码写入文件中：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/    PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
        &lt;key&gt;KeepAlive&lt;/key&gt;
        &lt;true/&gt;
        &lt;key&gt;Label&lt;/key&gt;
        &lt;string&gt;com.iosre.rootdaemond&lt;/string&gt;
        &lt;key&gt;Program&lt;/key&gt;
        &lt;string&gt;/usr/bin/rootdaemond&lt;/string&gt;
        &lt;key&gt;RunAtLoad&lt;/key&gt;
        &lt;true/&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre>

<p>在这些键值对当中，<code>Label</code>键对应的是一个可以唯一标示你的后台进程的字符串，<code>Program</code>键对应的是可执行文件所在位置的绝对路径，这两个都是必填的。如果你的后台进程还有其他的参数，那么只需要在文件中增加类似下面这样的键值对即可：</p>

<pre><code>&lt;key&gt;ProgramArguments&lt;/key&gt;
 &lt;array&gt;
        &lt;string&gt;arg1&lt;/string&gt;
        &lt;string&gt;arg2&lt;/string&gt;
        &lt;string&gt;more args...&lt;/string&gt;
    &lt;/array&gt;
</code></pre>

<p>在完成了这些之后，我们把这个配置文件保存在项目根目录下的/layout/Library/System/文件夹中。现在，我们的项目树看上去是这个样子的：</p>

<p><img src="/assets/images/2014-08-06-rootdaemon2.png" alt="image" /></p>

<p>执行<code>make package</code>命令，然后检查deb所属的用户：</p>

<pre><code>snakeninnys-MacBook:rootdaemond snakeninny$ dpkg-deb -c /Users/snakeninny/Code/ rootdaemond/com.iosre.rootdaemond_1.0-1_iphoneos-arm.deb 
drwxr-xr-x snakeninny/staff  0 2014-05-11 15:52 ./
drwxr-xr-x snakeninny/staff  0 2014-05-11 14:45 ./Library/
drwxr-xr-x snakeninny/staff  0 2014-05-11 15:48 ./Library/LaunchDaemons/
-rwxr-xr-x snakeninny/staff 367 2014-05-11 15:37 ./Library/LaunchDaemons/   com.iosre.rootdaemond.plist
drwxr-xr-x snakeninny/staff   0 2014-05-11 15:52 ./usr/
drwxr-xr-x snakeninny/staff   0 2014-05-11 15:52 ./usr/bin/
-rwxr-xr-x snakeninny/staff 197984 2014-05-11 15:52 ./usr/bin/rootdaemond
</code></pre>

<p>可以看到，deb中的所有文件都是属于snakeninny:staff的。还记得在第一部分中提到，后台进程必须属于root用户吗？所以，这个后台进程所属的用户不对，当你运行时将会报错。</p>

<p>这是为什么呢？因为这个deb文件是在OSX上打包的，所以它所属的用户就是snakeninny。为了将它的所属用户改为root:wheel，我们需要一个叫做<a href="https://github.com/DHowett/fauxsu">fauxsu</a>的工具。下载这个工具，将解压得到的fauxsu和libfauxsu.dylib复制到<code>$THEOS/bin/</code> 目录下，然后运行<code>chmod a+x</code>。重新打包检查一次：</p>

<pre><code>snakeninnys-MacBook:rootdaemond snakeninny$ dpkg-deb -c /Users/snakeninny/Code/ rootdaemond/com.iosre.rootdaemond_1.0-2_iphoneos-arm.deb 
drwxr-xr-x root/wheel        0 2014-05-11 16:05 ./
drwxr-xr-x root/wheel        0 2014-05-11 14:45 ./Library/
drwxr-xr-x root/wheel        0 2014-05-11 15:48 ./Library/LaunchDaemons/
-rwxr-xr-x root/wheel      367 2014-05-11 15:37 ./Library/LaunchDaemons/    com.iosre.rootdaemond.plist
drwxr-xr-x root/wheel        0 2014-05-11 16:05 ./usr/
drwxr-xr-x root/wheel        0 2014-05-11 16:05 ./usr/bin/
-rwxr-xr-x root/wheel   197984 2014-05-11 16:05 ./usr/bin/rootdaemond
</code></pre>

<p>现在，文件所属用户是正确的了。执行<code>make install</code>来安装这个后台进程：</p>

<pre><code>snakeninnys-MacBook:rootdaemond snakeninny$ make install
install.exec "cat &gt; /tmp/_theos_install.deb; dpkg -i /tmp/_theos_install.deb &amp;&amp; rm /tmp/    _theos_install.deb" &lt; "./com.iosre.rootdaemond_1.0-2_iphoneos-arm.deb"
Selecting previously deselected package com.iosre.rootdaemond.
(Reading database ... 2589 files and directories currently installed.)
Unpacking com.iosre.rootdaemond (from /tmp/_theos_install.deb) ...
Setting up com.iosre.rootdaemond (1.0-2) ...
</code></pre>

<h2>第三部分 测试</h2>

<p>重启手机检查后台进程是否启动：</p>

<pre><code>FunMaker-5:~ root# reboot
FunMaker-5:~ root# Connection to 192.168.1.101 closed by remote host.
Connection to 192.168.1.101 closed.
snakeninnys-MacBook:Code snakeninny$ ssh root@192.168.1.101
FunMaker-5:~ root# grep iOSRE /var/log/syslog
May 11 16:14:01 FunMaker-5 rootdaemond[20]: iOSRE: rootdaemond is launched!
FunMaker-5:~ root# ps -e | grep rootdaemond
  20 ??         0:00.13 /usr/bin/rootdaemond
370 ttys000    0:00.01 grep rootdaemond
FunMaker-5:~ root#
</code></pre>

<p>我们可以看到，rootdaemond开机自动启动，并且保持在后台运行。最后，我们检查一下它是否在像预期的那样运行：</p>

<pre><code>// compile: clang -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.0.sdk -o iOSRERootDaemonTester -arch armv7 /Users/snakeninny/main.mm

#include &lt;notify.h&gt;

int main(int argc, char **argv)
{
        notify_post("com.iosre.rootdaemon.reboot");
        return 0;
}
</code></pre>

<p>用scp命令将iOSRERootDaemonTester复制到iOS上，然后运行：</p>

<pre><code>snakeninnys-MacBook:~ snakeninny$ scp iOSRERootDaemonTester root@192.168.1.101:/var/tmp/
iOSRERootDaemonTester                         100%   48KB  48.3KB/s   00:00    
FunMaker-5:~ root# /var/tmp/iOSRERootDaemonTester
FunMaker-5:~ root# Connection to 192.168.1.101 closed by remote host.
Connection to 192.168.1.101 closed.
snakeninnys-MacBook:Code snakeninny$ ssh root@192.168.1.101
FunMaker-5:~ root# grep iOSRE /var/log/syslog
May 11 16:36:01 FunMaker-5 rootdaemond[20]: iOSRE: reboot
May 11 16:36:58 FunMaker-5 rootdaemond[20]: iOSRE: rootdaemond is launched!
FunMaker-5:~ root#
</code></pre>

<p>它神奇的运行了。</p>

<h2>第四部分 结论</h2>

<p>事实上，在iOS或者OSX上，后台进程和代理程序远比这篇文章中描述的要复杂的多。我强烈建议大家看一下下面相关的文章。再次强调，后台进程是一个强大的工具，但它是一把双刃剑，在你决定使用它之前，你最好非常了解自己接下来将要做什么，然后小心的使用它。谢谢阅读。</p>

<p>相关阅读：</p>

<ol>
<li>http://en.wikipedia.org/wiki/Daemon_(computing)</li>
<li>https://www.chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/</li>
<li>https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/launchctl.1.html</li>
<li>https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html</li>
<li>https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man5/launchd.plist.5.html</li>
</ol>


<p>2014.5.22注：
com.iosre.rootdaemond.plist文件必须拥有644权限，否则示例后台进程将不会运行。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Theos介绍</title>
      <link href="http://cubernet.cn/theos1/"/>
      <pubDate>2014-08-05T00:00:00+08:00</pubDate>
      <author>Cubernet</author>
      <guid>http://cubernet.cn/theos1</guid>
      <content:encoded><![CDATA[<p>最近由于工作原因，需要了解iOS越狱开发相关的一些技术。之前虽然有接触过iOS开发，不过都是基于苹果公开的API，相对于越狱开发还是一头雾水。于是打开Google，开始找寻我需要的资料。经过一段时间的查阅，发现iOS越狱开发相关的资料实在太少，并且比较杂乱，甚至即使在安装时遇到的问题都要花费很长的时间去搜索解决办法。虽说现在项目已经接近尾声，当初的很多步骤细节已经记得不清楚，不过我还是尽力回顾整理一下，对自己来说是一种知识的巩固，或许还能帮上别人的一点小忙。</p>

<!-- more -->


<h2>开发环境</h2>

<p>首先，要开启一段iOS越狱开发之旅的你，最好有一定的Objective-C基础，Objective-C是苹果开发的唯一官方语言，虽说越狱开发也可以采用Lua语言开发的Wax框架，但我相信了解Objective-C总归不是一件坏事。</p>

<p>其次，如果你有一台Mac，那么基本的开发环境以及iOS的SDK都会随着XCode的安装而解决。如果你是一位Linux上的geek，那么你只需要运行这段脚本【<a href="http://https://gist.github.com/kirb/2353599">点击下载</a>】，就可以安装Toolchain和Theos来完成基本开发环境的搭建。如果你是Windows的fans，那……暂时我还没找到解决办法。</p>

<p>由于我是在Mac上进行的开发，所以下面的内容都是默认在Mac上。</p>

<h2>常用框架</h2>

<p>iOS越狱开发常用的框架有两个，一个是Theos；</p>

<blockquote><p>Theos is a cross-platform suite of development tools for managing, developing, and deploying iOS software without the use of Xcode.——iphonedevwiki</p>

<p>Theos是一个跨平台的开发工具套件，用于在没有Xcode的情况下管理、开发、部署iOS软件。——iphonedevwiki</p></blockquote>

<p>另外一个是iOSOpenDev。</p>

<blockquote><p>iOSOpenDev is an open-source project that sets up the iOS SDK to allow open development in Xcode of jailbreak-type projects not supported nor allowed by default and provides Xcode templates for building common jailbreak-type projects and the various tools needed for such development.——iphonedevwiki</p>

<p>iOSOpenDev是一个开源项目，它使开发者可以在Xcode中开发默认情况下不支持的越狱项目，并且提供越狱开发中需要的模板和工具。——iphonedevwiki</p></blockquote>

<p>以上是这两款工具在iphonedevwiki中给出的解释以及我个人的翻译。简单点说，采用Theos开发时需要自己管理makefile文件等，界面没有在Xcode中友好；iOSOpenDev则是基于Xcode创建模板和编译打包，对于不熟悉makefile的同学可能更倾向使用它。不过我本人更喜欢Theos，感觉更高效直观，而且在安装iOSOpenDev时遇到一系列未知错误，好像是和OS X及Xcode的版本相关，所以一直在用Theos，虽然我也不熟悉makefile，活到老学到老嘛：）。</p>

<h2>Theos安装及使用</h2>

<p>说了这么多，下面开始看下Theos的安装及使用。</p>

<p>从Theos的库中下载框架到本地：</p>

<pre><code>git clone https://github.com/DHowett/theos /opt/theos
</code></pre>

<p>你可以将其保存在本地的任何位置，不过推荐使用默认的/opt/theos。</p>

<p>除此之外，你还需要安装<code>ldid</code>和<code>dpkg</code>，这两个工具是签名和打包时必须的。推荐通过Macports安装dpkg：</p>

<pre><code>sudo port install dkpg
</code></pre>

<p>默认的Theos中，很多苹果私有的头文件都没有包含在下载包中，这时推荐下载rpetrich已经打包好的头文件库（当然也可以用class-dump自己去获取），下载好解压在<code>$THEOS/include</code>文件夹下即可。<a href="https://github.com/rpetrich/iphoneheaders">点击下载</a></p>

<p>这时就可以开始我们的第一个Theos应用了。</p>

<ul>
<li><p>设置环境变量：</p>

<pre><code>  export THEOS=/opt/theos
</code></pre></li>
<li><p>进入存放项目的文件夹下，创建示例工程：</p>

<pre><code>  $THEOS/bin/nic.pl
</code></pre></li>
<li><p>这时需要我们选择使用哪种模板：</p>

<pre><code>  application--&gt; 普通的应用程序
  library--&gt;库文件
  preference_bundle--&gt;设置束
  tool --&gt;后台程序
  tweak--&gt;外挂程序
</code></pre></li>
<li><p>之后输入工程名、包名等参数即可完成初始化工作。</p></li>
<li>网上有很多tweak程序的helloworld版本，即在开机时弹出一个框，显示helloworld，大家可以google一下。</li>
<li>在编码完成之后就可以编译打包然后安装到手机上测试了。</li>
<li><p>如果你的测试iPhone上安装了ssh，那么只需要在makefile或者系统变量中添加THEOS_DEVICE_IP=192.168.x.xxx（你的IP），然后执行下面这条命令就可以自动完成编译、打包、安装了：</p>

<pre><code>  make package install
</code></pre></li>
</ul>


<p>这时会提示你输入ssh密码，默认的密码是<code>alpine</code>。</p>

<p>Theos默认的要求非常严格，经常会因为warning而报错，无法安装测试。这时在makefile头部添加'GO_EASY_ON_ME=1'即可。</p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
